---
title: IPA介紹
authors: [yuyu1015]
tags: [iOS, Apple, IPA, 自簽章]
---

<header>
  <span>
    IPA 全稱為（iOS App Store Package），是由 Apple
    公司開發的檔案格式，主要用於分發 iOS App。IPA 檔案包含了 iOS App
    需使用的所有資料與檔案，可以在兼容的 iOS 裝置上安裝及執行。
  </span>
</header>

<div>
  <h3>IPA的資料結構</h3>
  <span>
    IPA檔案實際上是一個壓縮包，檔案結構類似於電腦上的ZIP、7z
    等壓縮檔案，包含了以下主要內容：
  </span>
  <ol>
    <li>
      <span>Payload資料夾：</span>
      <span className="IPA_description">
        此為IPA的檔案核心，包含應用程式的可執行檔案（.app包）以及所有資源。
      </span>
      <span className="IPA_app_package">.app包</span>
      <span>
        此為應用程式本身，包含了可執行檔案、資源檔案（例如：圖片、音檔…等）、設定檔案（例如：Info.plist）以及框架和動態資源庫等。
      </span>
    </li>
    <li>
      <span>iTunesMetadata.plist：</span>
      <span className="IPA_description">
        包含應用程式的Meta資料，例如App名稱、版本號、開發者資訊等（僅存在於App
        Store下載的App）。
      </span>
    </li>
    <li>
      <span>iTunesArtwork、iTunesArtwork@2x：</span>
      <span className="IPA_description">
        應用程式的圖標檔案，通常為512x512或者1024x1024像素的PNG格式檔案。
      </span>
    </li>
    <li>
      <span>其他檔案：</span>
      <span className="IPA_description">
        包括WatchKit檔案等，將視App的具體需求而定。
      </span>
    </li>
  </ol>
</div>

<div>
  <h3>IPA檔案建立方式</h3>
  <span>IPA檔案主要由Xcode建立。</span>
  <ol>
    <li>
      <span>設定開發環境：</span>
      <span className="IPA_description">
        在Xcode中設定應用程式的各種配置，例如：自簽章憑證（Self-Signed
        Certificate）、Provisioning Profile等。
      </span>
    </li>
    <li>
      <span>建構應用程式：</span>
      <span className="IPA_description">
        在Xcode中選擇合適的建構配置（例如Release），然後進行建構。
      </span>
    </li>
    <li>
      <span>包裝應用程式：</span>
      <span className="IPA_description">
        在Xcode中選擇〝Product〞選項列表，然後點擊〝Archive〞選項，建立應用程式的歸檔檔案（.xcarchive）。
      </span>
    </li>
    <li>
      <span>匯出IPA檔案：</span>
      <span className="IPA_description">
        在Xcode的Organizer視窗中選擇建立的歸檔檔案，接著點擊〝Distribute
        App〞按鈕，選擇〝Ad-Hoc〞或〝App Store〞等分發方式，並匯出IPA檔案。
      </span>
    </li>
  </ol>
</div>

<div>
  <h3>IPA檔案分發</h3>
  <span>IPA檔案可以透過多種方式分發給使用者。</span>
  <ol>
    <li>
      <span>App Store：</span>
      <span className="IPA_description">
        此為最常見的分發方式，開發者需要將IPA檔案上傳到Apple的App
        Store進行審核，當審核通過後，應用程式將會上架到App
        Store，供民眾下載及安裝。
      </span>
    </li>
    <li>
      <span>Ad-Hoc：</span>
      <span className="IPA_description">
        開發者可以使用Ad-Hoc方式將應用程式發佈給有限的測試人員，這需要使用Ad-Hoc
        Provisioning
        Profile來對IPA檔案進行自簽章憑證，且測試裝置的UDID需要包含在Provisioning
        Profile內。
      </span>
    </li>
    <li>
      <span>企業內部：</span>
      <span className="IPA_description">
        公司企業可以使用企業開發者帳號（Enterprise Developer
        Account）進行自簽章以及分發IPA，允許公司內部員工安裝以及使用應用程式，而不需要透過App
        Store進行下載，這種方式適合在公司企業內部測試用途。
      </span>
    </li>
    <li>
      <span>TestFlight：</span>
      <span className="IPA_description">
        Apple提供了測試分發平台，開發者可以將應用程式上傳至TestFlight，並邀請測試人員下載和安裝使用，TestFlight提供了方便的測試管理功能，包括蒐集測試回報以及程式崩潰Log等。
      </span>
    </li>
  </ol>
</div>

<div>
  <h3>簽章及Provisioning Profile</h3>
  <span>
    為何在iOS上安裝及執行開發好的應用程式，通常IPA檔案必須進行自簽章，這個過程涉及到使用Apple提供的開發者簽章和Provisioning
    Profile。
  </span>
  <ol>
    <li>
      <span>開發者簽章：</span>
      <span className="IPA_description">
        Apple發行的數字簽章，用戶確保應用程式的開發者身份，開發者簽章分為開發（Developement）和發佈（Distribution）兩種方式。
      </span>
    </li>
    <li>
      <span>Provisioning Profile：</span>
      <span className="IPA_description">
        描述應用程式在哪些裝置上可以安裝和執行的設定檔案，包含開發者簽章、App
        ID以及裝置ID等資訊，分為開發（Developement）、Ad-Hoc、企業（Enterprise）和App
        Store四種類型。
      </span>
    </li>
  </ol>
</div>
